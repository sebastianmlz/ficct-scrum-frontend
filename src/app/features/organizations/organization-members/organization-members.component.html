<div class="max-w-5xl mx-auto p-6">
	<h2 class="text-2xl font-bold mb-6 text-primary">Miembros de la Organización</h2>

	<p *ngIf="error" class="text-red-500 mb-4">{{ error }}</p>

	<p-progressSpinner *ngIf="loading" styleClass="mx-auto block" strokeWidth="4" fill="var(--surface-ground)" animationDuration=".5s"></p-progressSpinner>

		<div class="bg-white rounded-2xl shadow-xl border border-gray-200 p-2">
			<p-table *ngIf="!loading && members?.length" [value]="members" class="w-full" style="overflow-x:auto;">
				<ng-template pTemplate="header">
					<tr class="bg-blue-100 sticky top-0 z-10">
						<th class="py-4 px-6 text-left font-semibold text-gray-700">Usuario</th>
						<th class="py-4 px-6 text-left font-semibold text-gray-700">Email</th>
						<th class="py-4 px-6 text-left font-semibold text-gray-700">Rol</th>
						<th class="py-4 px-6 text-left font-semibold text-gray-700">Estado</th>
						<th class="py-4 px-6 text-left font-semibold text-gray-700">Invitado por</th>
						<th class="py-4 px-6 text-left font-semibold text-gray-700">Invitado el</th>
						<th class="py-4 px-6 text-left font-semibold text-gray-700">Activo</th>
					</tr>
				</ng-template>
				<ng-template pTemplate="body" let-member>
					<tr class="hover:bg-blue-50 transition-colors duration-150 border-b border-gray-100 last:border-b-0">
						<td class="py-3 px-6 flex items-center gap-3">
							<div class="h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-xl shadow">
								{{ member.user.full_name.charAt(0) }}
							</div>
							<span class="font-medium text-gray-900">{{ member.user.full_name }}</span>
						</td>
						<td class="py-3 px-6 text-gray-700">{{ member.user.email }}</td>
						<td class="py-3 px-6">
							<span [ngClass]="{
								'bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold': member.role === 'owner',
								'bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold': member.role === 'admin',
								'bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-semibold': member.role === 'member',
								'bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm font-semibold': member.role !== 'owner' && member.role !== 'admin' && member.role !== 'member'
							}">{{ member.role }}</span>
						</td>
						<td class="py-3 px-6">
							<span [ngClass]="{
								'bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold': member.status === 'active',
								'bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold': member.status !== 'active'
							}">{{ member.status }}</span>
						</td>
						<td class="py-3 px-6 text-gray-700">{{ member.invited_by?.full_name || '-' }}</td>
						<td class="py-3 px-6 text-gray-700">{{ member.invited_at | date:'short' }}</td>
						<td class="py-3 px-6">
							<span [ngClass]="member.is_active ? 'bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold' : 'bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold'">
								{{ member.is_active ? 'Sí' : 'No' }}
							</span>
						</td>
					</tr>
				</ng-template>
			</p-table>
		</div>

	<div *ngIf="!loading && (!members || !members.length) && !error" class="text-gray-500 text-center py-8">
		No hay miembros en esta organización.
	</div>
</div>
