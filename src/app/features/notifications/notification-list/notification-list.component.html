<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900">Notifications</h1>
      <p class="mt-2 text-gray-600">Stay updated with your project activities</p>
    </div>

    <!-- Filters and Actions -->
    <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
        <!-- Filter by Type -->
        <div class="flex items-center gap-2">
          <label class="text-sm font-medium text-gray-700">Filter:</label>
          <select 
            [value]="selectedType()" 
            (change)="changeType($any($event.target).value)"
            class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            @for (type of notificationTypes; track type.value) {
              <option [value]="type.value">{{ type.label }}</option>
            }
          </select>
        </div>

        <!-- Actions -->
        <div class="flex items-center gap-3">
          <button 
            (click)="toggleUnreadFilter()"
            [class.bg-blue-50]="filterUnreadOnly()"
            [class.text-blue-700]="filterUnreadOnly()"
            [class.border-blue-300]="filterUnreadOnly()"
            class="px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors">
            {{ filterUnreadOnly() ? 'üì¨ Unread Only' : 'üì≠ All' }}
          </button>
          <button 
            (click)="markAllAsRead()"
            class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors">
            ‚úì Mark All as Read
          </button>
          <a 
            [routerLink]="['/notifications/preferences']"
            class="px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors">
            ‚öôÔ∏è Preferences
          </a>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    @if (loading()) {
      <div class="bg-white rounded-lg shadow-sm p-8 text-center">
        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
        <p class="mt-4 text-gray-600">Loading notifications...</p>
      </div>
    }

    <!-- Error State -->
    @else if (error()) {
      <div class="bg-red-50 border border-red-200 rounded-lg p-4 text-center">
        <p class="text-red-800">{{ error() }}</p>
        <button 
          (click)="loadNotifications()"
          class="mt-3 px-4 py-2 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 transition-colors">
          Retry
        </button>
      </div>
    }

    <!-- Notifications List -->
    @else if (notifications().length > 0) {
      <div class="space-y-3">
        @for (notification of notifications(); track notification.id) {
          <div 
            [class.bg-blue-50]="!notification.is_read"
            [class.bg-white]="notification.is_read"
            class="rounded-lg shadow-sm p-4 border border-gray-200 hover:shadow-md transition-shadow cursor-pointer"
            (click)="markAsRead(notification)">
            <div class="flex items-start gap-4">
              <!-- Icon -->
              <div class="flex-shrink-0 w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-xl">
                {{ getNotificationIcon(notification.notification_type) }}
              </div>

              <!-- Content -->
              <div class="flex-1 min-w-0">
                <div class="flex items-start justify-between gap-2">
                  <h3 class="text-sm font-semibold text-gray-900">
                    {{ notification.title }}
                  </h3>
                  @if (!notification.is_read) {
                    <span class="flex-shrink-0 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-600 text-white">
                      New
                    </span>
                  }
                </div>
                <p class="mt-1 text-sm text-gray-600">{{ notification.message }}</p>
                <div class="mt-2 flex items-center gap-4 text-xs text-gray-500">
                  <span>üïê {{ getRelativeTime(notification.created_at) }}</span>
                  <span class="px-2 py-1 bg-gray-100 rounded-full">
                    {{ notification.type_display }}
                  </span>
                  @if (notification.read_at) {
                    <span class="text-green-600">‚úì Read</span>
                  }
                </div>
              </div>

              <!-- Mark as Read Button -->
              @if (!notification.is_read) {
                <button 
                  (click)="markAsRead(notification); $event.stopPropagation()"
                  class="flex-shrink-0 p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                  title="Mark as read">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
                </button>
              }
            </div>
          </div>
        }
      </div>
    }

    <!-- Empty State -->
    @else {
      <div class="bg-white rounded-lg shadow-sm p-12 text-center">
        <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
          </svg>
        </div>
        <h3 class="text-lg font-medium text-gray-900 mb-2">No notifications</h3>
        <p class="text-gray-600">
          {{ filterUnreadOnly() ? 'You have no unread notifications' : 'You\'re all caught up!' }}
        </p>
      </div>
    }
  </div>
</div>
