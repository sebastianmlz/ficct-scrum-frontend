<div class="bg-white rounded-lg shadow-xl max-w-md w-full">
  <!-- Header -->
  <div class="px-6 py-4 border-b border-gray-200">
    <h2 class="text-xl font-semibold text-gray-900">Add Column to Board</h2>
    <p class="text-sm text-gray-600 mt-1">Create a new column for organizing issues</p>
  </div>

  <!-- Form -->
  <form [formGroup]="columnForm" (ngSubmit)="onSubmit()" class="px-6 py-4">
    <!-- Error Alert -->
    <div *ngIf="error()" class="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg">
      <p class="text-sm text-red-600">{{ error() }}</p>
    </div>

    <!-- Column Name -->
    <div class="mb-4">
      <label for="name" class="block text-sm font-medium text-gray-700 mb-1">
        Column Name <span class="text-red-500">*</span>
      </label>
      <input
        id="name"
        type="text"
        formControlName="name"
        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        placeholder="e.g., In Progress"
        [class.border-red-500]="getFieldError('name')">
      <p *ngIf="getFieldError('name')" class="mt-1 text-sm text-red-600">
        {{ getFieldError('name') }}
      </p>
    </div>

    <!-- Workflow Status -->
    <div class="mb-4">
      <label for="workflow_status_id" class="block text-sm font-medium text-gray-700 mb-1">
        Workflow Status <span class="text-red-500">*</span>
      </label>
      <select
        id="workflow_status_id"
        formControlName="workflow_status_id"
        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        [class.border-red-500]="getFieldError('workflow_status_id')">
        <option value="">Select a status...</option>
        <option *ngFor="let status of workflowStatuses()" [value]="status.id">
          {{ status.name }}
        </option>
      </select>
      <p *ngIf="getFieldError('workflow_status_id')" class="mt-1 text-sm text-red-600">
        {{ getFieldError('workflow_status_id') }}
      </p>
      <p *ngIf="loadingStatuses()" class="mt-1 text-sm text-gray-500">
        Loading statuses...
      </p>
    </div>

    <!-- WIP Limits -->
    <div class="grid grid-cols-2 gap-4 mb-4">
      <div>
        <label for="min_wip" class="block text-sm font-medium text-gray-700 mb-1">
          Min WIP
        </label>
        <input
          id="min_wip"
          type="number"
          formControlName="min_wip"
          min="0"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          placeholder="0">
        <p class="mt-1 text-xs text-gray-500">Optional minimum</p>
      </div>

      <div>
        <label for="max_wip" class="block text-sm font-medium text-gray-700 mb-1">
          Max WIP
        </label>
        <input
          id="max_wip"
          type="number"
          formControlName="max_wip"
          min="0"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          placeholder="10">
        <p class="mt-1 text-xs text-gray-500">Optional maximum</p>
      </div>
    </div>

    <!-- Help Text -->
    <div class="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
      <p class="text-sm text-blue-800">
        <strong>WIP (Work In Progress) Limits:</strong> Set min/max to control the number of issues in this column.
      </p>
    </div>
  </form>

  <!-- Footer -->
  <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3">
    <button
      type="button"
      (click)="onCancel()"
      [disabled]="loading()"
      class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
      Cancel
    </button>
    <button
      type="submit"
      (click)="onSubmit()"
      [disabled]="loading() || columnForm.invalid"
      class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2">
      <span *ngIf="loading()" class="inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white"></span>
      {{ loading() ? 'Creating...' : 'Create Column' }}
    </button>
  </div>
</div>
