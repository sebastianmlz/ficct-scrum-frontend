<div class="bg-gray-100 rounded-lg p-2 sm:p-3 flex flex-col h-full w-full md:min-w-[280px] md:max-w-[280px] lg:min-w-[300px] lg:max-w-[300px] md:flex-shrink-0">
  <!-- Column Header -->
  <div class="flex items-center justify-between mb-2 sm:mb-3 pb-2 sm:pb-3 border-b border-gray-300">
    <div class="flex items-center gap-2 flex-1">
      <div
        class="w-3 h-3 rounded-full"
        [style.background-color]="column.workflow_status.color">
      </div>
      <h3 class="font-semibold text-gray-900 text-xs sm:text-sm">{{ column.name }}</h3>
    </div>
    
    <!-- WIP Limit Indicator -->
    <div
      *ngIf="column.max_wip"
      [class]="'px-2 py-1 text-xs font-medium rounded border ' + getWipClass()">
      {{ issues.length }} / {{ column.max_wip }}
    </div>
    <div
      *ngIf="!column.max_wip"
      class="px-2 py-1 text-xs font-medium text-gray-600 bg-gray-50 rounded border border-gray-200">
      {{ issues.length }}
    </div>
  </div>

  <!-- Drop Zone -->
  <div
    cdkDropList
    [id]="column.id"
    [cdkDropListData]="issues"
    [cdkDropListConnectedTo]="connectedDropLists"
    (cdkDropListDropped)="drop($event)"
    class="flex-1 overflow-y-auto min-h-[150px] sm:min-h-[200px] space-y-2">
    
    <!-- Loading State -->
    <div *ngIf="loading" class="flex items-center justify-center py-8">
      <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
    </div>

    <!-- Issue Cards -->
    <div
      *ngFor="let issue of issues; trackBy: trackByIssueId"
      cdkDrag
      [cdkDragData]="issue">
      <app-issue-card
        [issue]="issue"
        (clicked)="onIssueClick($event)">
      </app-issue-card>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && issues.length === 0" class="flex flex-col items-center justify-center py-8 text-gray-400">
      <svg class="w-12 h-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
      </svg>
      <p class="text-sm">No issues</p>
    </div>
  </div>

  <!-- Add Issue Button -->
  <button
    (click)="onCreateIssue()"
    class="mt-2 sm:mt-3 w-full px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded transition-colors flex items-center justify-center gap-2">
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
    </svg>
    Add Issue
  </button>
</div>
